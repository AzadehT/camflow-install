v0.1.0: lsm-version=v0.1.0
v0.1.0: provenance-version=v0.1.0 #user space version number need not to be identical to LSM
v0.1.0: ifc-version=v0.1.0 #user space version number need not to be identical to LSM

v0.1.1: lsm-version=v0.1.1
v0.1.1: provenance-version=v0.1.1 #user space version number need not to be identical to LSM
v0.1.1: ifc-version=v0.1.1 #user space version number need not to be identical to LSM

v0.1.2: lsm-version=v0.1.2
v0.1.2: provenance-version=v0.1.2 #user space version number need not to be identical to LSM
v0.1.2: ifc-version=v0.1.2 #user space version number need not to be identical to LSM
v0.1.2: config-version=v0.1.0 #user space version number need not to be identical to LSM

v0.1.3: lsm-version=v0.1.3
v0.1.3: provenance-version=v0.1.3 #user space version number need not to be identical to LSM
v0.1.3: ifc-version=v0.1.2 #user space version number need not to be identical to LSM
v0.1.3: config-version=v0.1.0 #user space version number need not to be identical to LSM

v0.1.4: lsm-version=v0.1.4
v0.1.4: provenance-version=v0.1.5 #user space version number need not to be identical to LSM
v0.1.4: ifc-version=v0.1.3 #user space version number need not to be identical to LSM
v0.1.4: config-version=v0.1.0 #user space version number need not to be identical to LSM

v0.1.5: lsm-version=v0.1.5
v0.1.5: provenance-version=v0.1.6 #user space version number need not to be identical to LSM
v0.1.5: ifc-version=v0.1.3 #user space version number need not to be identical to LSM
v0.1.5: config-version=v0.1.1 #user space version number need not to be identical to LSM

v0.1.6: lsm-version=v0.1.6
v0.1.6: provenance-version=v0.1.7 #user space version number need not to be identical to LSM
v0.1.6: ifc-version=v0.1.4 #user space version number need not to be identical to LSM
v0.1.6: config-version=v0.1.2 #user space version number need not to be identical to LSM

v0.1.7: lsm-version=v0.1.7
v0.1.7: provenance-version=v0.1.8 #user space version number need not to be identical to LSM
v0.1.7: ifc-version=v0.1.4 #user space version number need not to be identical to LSM
v0.1.7: config-version=v0.1.3 #user space version number need not to be identical to LSM

v0.1.8: lsm-version=v0.1.8
v0.1.8: provenance-version=v0.1.9 #user space version number need not to be identical to LSM
v0.1.8: ifc-version=v0.1.4 #user space version number need not to be identical to LSM
v0.1.8: config-version=v0.1.4 #user space version number need not to be identical to LSM

v0.1.9: lsm-version=v0.1.9
v0.1.9: provenance-version=v0.1.10 #user space version number need not to be identical to LSM
v0.1.9: ifc-version=v0.1.4 #user space version number need not to be identical to LSM
v0.1.9: config-version=v0.1.5 #user space version number need not to be identical to LSM

v0.1.10: lsm-version=v0.1.10
v0.1.10: provenance-version=v0.1.12 #user space version number need not to be identical to LSM
v0.1.10: ifc-version=v0.1.4 #user space version number need not to be identical to LSM
v0.1.10: config-version=v0.1.6 #user space version number need not to be identical to LSM

v0.1.11: lsm-version=v0.1.11
v0.1.11: provenance-version=v0.1.13 #user space version number need not to be identical to LSM
v0.1.11: ifc-version=v0.1.4 #user space version number need not to be identical to LSM
v0.1.11: config-version=v0.1.7 #user space version number need not to be identical to LSM

v0.2.0: lsm-version=v0.2.0
v0.2.0: provenance-version=v0.2.0 #user space version number need not to be identical to LSM
v0.2.0: config-version=v0.2.0 #user space version number need not to be identical to LSM

v0.2.1: lsm-version=v0.2.1
v0.2.1: provenance-version=v0.2.0 #user space version number need not to be identical to LSM
v0.2.1: config-version=v0.2.0 #user space version number need not to be identical to LSM

v0.2.2: lsm-version=v0.2.2
v0.2.2: provenance-version=v0.2.1 #user space version number need not to be identical to LSM
v0.2.2: config-version=v0.2.0 #user space version number need not to be identical to LSM

v0.2.3: lsm-version=v0.2.3
v0.2.3: provenance-version=v0.2.3 #user space version number need not to be identical to LSM
v0.2.3: config-version=v0.2.1 #user space version number need not to be identical to LSM
v0.2.3: cli-version=v0.1.0 #user space version number need not to be identical to LSM

v0.3.0: lsm-version=v0.3.0
v0.3.0: provenance-version=v0.3.0 #user space version number need not to be identical to LSM
v0.3.0: config-version=v0.3.0 #user space version number need not to be identical to LSM
v0.3.0: cli-version=v0.1.1 #user space version number need not to be identical to LSM

v0.3.1: lsm-version=v0.3.1
v0.3.1: provenance-version=v0.3.1 #user space version number need not to be identical to LSM
v0.3.1: config-version=v0.3.0 #user space version number need not to be identical to LSM
v0.3.1: cli-version=v0.1.2 #user space version number need not to be identical to LSM
v0.3.1: service-version=v0.1.0

travis: lsm-version=v0.3.1
travis: provenance-version=v0.3.1 #user space version number need not to be identical to LSM
travis: config-version=v0.3.0 #user space version number need not to be identical to LSM
travis: cli-version=v0.1.2 #user space version number need not to be identical to LSM
travis: service-version=v0.1.0

all: v0.3.1

prepare_provenance:
	mkdir -p build
	@echo "Downloading provenance library ${provenance-version} ..."
	cd ./build && git clone https://github.com/camflow/camflow-provenance-lib.git
	cd ./build/camflow-provenance-lib && git checkout tags/${provenance-version}
	cd ./build/camflow-provenance-lib && $(MAKE) prepare

prepare_ifc:
	mkdir -p build
	@echo "Downloading ifc library ${ifc-version} ..."
	cd ./build && git clone https://github.com/camflow/camflow-ifc-lib.git
	cd ./build/camflow-ifc-lib && git checkout tags/${ifc-version}
	cd ./build/camflow-ifc-lib && $(MAKE) prepare

prepare_config:
	mkdir -p build
	@echo "Downloading configuration service ${config-version} ..."
	cd ./build && git clone https://github.com/camflow/camflow-config.git
	cd ./build/camflow-config && git checkout tags/${config-version}
	cd ./build/camflow-config && $(MAKE) prepare

prepare_cli:
	mkdir -p build
	@echo "Downloading command line interface ${cli-version} ..."
	cd ./build && git clone https://github.com/camflow/camflow-cli.git
	cd ./build/camflow-cli && git checkout tags/${cli-version}
	cd ./build/camflow-cli && $(MAKE) prepare

prepare_service:
	mkdir -p build
	@echo "Downloading service ${service-version} ..."
	cd ./build && git clone https://github.com/camflow/camflow-service.git
	cd ./build/camflow-service && git checkout tags/${service-version}
	cd ./build/camflow-service && $(MAKE) prepare

prepare_lsm:
	mkdir -p build
	@echo "Downloading LSM patches..."
	cd ./build && git clone https://github.com/camflow/camflow-patches.git
	cd ./build/camflow-patches/${lsm-version} && $(MAKE) prepare

config:
	@echo "Starting kernel configuration ..."
	cd ./build/camflow-patches/${lsm-version} && $(MAKE) config

config_travis:
	@echo "Starting kernel configuration ..."
	cd ./build/camflow-patches/${lsm-version} && $(MAKE) config_travis

compile_lsm:
	@echo "Building kernel ..."
	cd ./build/camflow-patches/${lsm-version} && $(MAKE) compile

compile_ifc:
	@echo "Building IFC library ..."
	cd ./build/camflow-ifc-lib && $(MAKE) all

compile_provenance:
	@echo "Building provenance library ..."
	cd ./build/camflow-provenance-lib && $(MAKE) all

install_lsm:
	@echo "Installing kernel ..."
	cd ./build/camflow-patches/v${lsm-version} && $(MAKE) install

install_ifc:
	@echo "Installing IFC library ..."
	cd ./build/camflow-ifc-lib && $(MAKE) install

install_provenance:
	@echo "Installing provenance library ..."
	cd ./build/camflow-provenance-lib && $(MAKE) install

install_config:
	@echo "Building configuration service ..."
	cd ./build/camflow-config && $(MAKE) all
	@echo "Installing configuration service ..."
	cd ./build/camflow-config && $(MAKE) install

install_cli:
	@echo "Building command line interface ..."
	cd ./build/camflow-cli && $(MAKE) all
	@echo "Installing command line interface ..."
	cd ./build/camflow-cli && $(MAKE) install

install_service:
	@echo "Building command line interface ..."
	cd ./build/camflow-service && $(MAKE) all
	@echo "Installing command line interface ..."
	cd ./build/camflow-service && $(MAKE) install

v0.1.0: prepare_ifc prepare_provenance prepare_lsm config compile_lsm compile_ifc compile_provenance install_lsm install_provenance install_ifc

v0.1.1: prepare_ifc prepare_provenance prepare_lsm config compile_lsm compile_ifc compile_provenance install_lsm install_provenance install_ifc

v0.1.2: prepare_ifc prepare_provenance prepare_config prepare_lsm config compile_lsm compile_ifc compile_provenance install_lsm install_provenance install_config install_ifc

v0.1.3: prepare_ifc prepare_provenance prepare_config prepare_lsm config compile_lsm compile_ifc compile_provenance install_lsm install_provenance install_config install_ifc

v0.1.4: prepare_ifc prepare_provenance prepare_config prepare_lsm config compile_lsm compile_ifc compile_provenance install_lsm install_provenance install_config install_ifc

v0.1.5: prepare_ifc prepare_provenance prepare_config prepare_lsm config compile_lsm compile_ifc compile_provenance install_lsm install_provenance install_config install_ifc

v0.1.6: prepare_ifc prepare_provenance prepare_config prepare_lsm config compile_lsm compile_ifc compile_provenance install_lsm install_provenance install_config install_ifc

v0.1.7: prepare_ifc prepare_provenance prepare_config prepare_lsm config compile_lsm compile_ifc compile_provenance install_lsm install_provenance install_config install_ifc

v0.1.8: prepare_ifc prepare_provenance prepare_config prepare_lsm config compile_lsm compile_ifc compile_provenance install_lsm install_provenance install_config install_ifc

v0.1.9: prepare_ifc prepare_provenance prepare_config prepare_lsm config compile_lsm compile_ifc compile_provenance install_lsm install_provenance install_config install_ifc

v0.1.10: prepare_ifc prepare_provenance prepare_config prepare_lsm config compile_lsm compile_ifc compile_provenance install_lsm install_provenance install_config install_ifc

v0.1.11: prepare_ifc prepare_provenance prepare_config prepare_lsm config compile_lsm compile_ifc compile_provenance install_lsm install_provenance install_config install_ifc

v0.2.0: prepare_provenance prepare_config prepare_lsm config compile_lsm compile_provenance install_lsm install_provenance install_config

v0.2.1: prepare_provenance prepare_config prepare_lsm config compile_lsm compile_provenance install_lsm install_provenance install_config

v0.2.2: prepare_provenance prepare_config prepare_lsm config compile_lsm compile_provenance install_lsm install_provenance install_config

v0.2.3: prepare_provenance prepare_config prepare_cli prepare_lsm config compile_lsm compile_provenance install_lsm install_provenance install_config install_cli

v0.3.0: prepare_provenance prepare_config prepare_cli prepare_lsm config compile_lsm compile_provenance install_lsm install_provenance install_config install_cli

v0.3.1: prepare_provenance prepare_config prepare_cli prepare_service prepare_lsm config compile_lsm compile_provenance install_lsm install_provenance install_config install_cli install_service

travis: prepare_lsm config_travis compile_lsm
